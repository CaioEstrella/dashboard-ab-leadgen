<!DOCTYPE html>
<html lang="pt-BR" data-color-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard AB - Leadgen</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="animated-background">
        <div class="shape circle"></div>
        <div class="shape square"></div>
        <div class="shape triangle"></div>
        <div class="shape circle"></div>
        <div class="shape square"></div>
        <div class="shape triangle"></div>
    </div>

    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="container">
                <div class="flex justify-between items-center">
                    <h1 class="dashboard-title">Dashboard AB - Leadgen</h1>
                    <button id="themeToggle" class="btn btn--outline theme-toggle">
                        <span class="theme-icon">ðŸŒ™</span>
                        <span class="theme-text">Modo Noturno</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main container">
            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading-indicator">
                <div class="loading-spinner"></div>
                <p>Carregando dados...</p>
            </div>

            <!-- Filters Section -->
            <section class="filters-section card">
                <div class="card__body">
                    <h3>Filtros</h3>
                    <div class="filters-grid">
                        <div class="form-group">
                            <label class="form-label" for="dateStart">Data Inicial</label>
                            <input type="date" id="dateStart" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="dateEnd">Data Final</label>
                            <input type="date" id="dateEnd" class="form-control">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="searchText">Buscar</label>
                            <input type="text" id="searchText" class="form-control" placeholder="Nome ou telefone...">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="originFilter">Origem</label>
                                <select id="originFilter" class="form-control">
                                    <option value="">Todas as origens</option>
                                    <!-- opÃ§Ãµes serÃ£o inseridas via JS -->
                                </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Metrics Cards -->
            <section class="metrics-section">
                <div class="metrics-grid">
                    <div class="metric-card card">
                        <div class="card__body">
                            <div class="metric-content">
                                <h3>Total Clicks</h3>
                                <div class="metric-value" id="totalClicks">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card card">
                        <div class="card__body">
                            <div class="metric-content">
                                <h3>Total Scans Loja</h3>
                                <div class="metric-value" id="totalScansLoja">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card card">
                        <div class="card__body">
                            <div class="metric-content">
                                <h3>Total Scans Kasa123</h3>
                                <div class="metric-value" id="totalScansKasa123">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card card">
                        <div class="card__body">
                            <div class="metric-content">
                                <h3>Total Leads</h3>
                                <div class="metric-value" id="totalLeads">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Timeline Chart Section - Full Width -->
            <section class="timeline-chart-section">
                <div class="timeline-chart-container card">
                    <div class="card__body">
                        <h3>EvoluÃ§Ã£o Temporal</h3>
                        <div class="chart-wrapper">
                            <canvas id="timelineChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Proportion Chart Section - Isolated -->
            <section class="proportion-chart-section">
                <div class="proportion-chart-container card">
                    <div class="card__body">
                        <h3>ProporÃ§Ã£o de MÃ©tricas</h3>
                        <div class="chart-wrapper">
                            <canvas id="proportionChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Leads Table -->
            <section class="table-section card">
                <div class="card__body">
                    <h3>Tabela de Leads</h3>
                    <div class="table-container">
                        <table class="leads-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Telefone</th>
                                    <th>Origem</th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody id="leadsTableBody">
                                <!-- Leads will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination-controls">
                        <button id="prevPage" class="btn btn--outline">Anterior</button>
                        <span id="pageInfo" class="page-info">PÃ¡gina 1</span>
                        <button id="nextPage" class="btn btn--outline">PrÃ³xima</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>